{% extends "master.html" %}
{% load i18n %}
{% load humanize %}


{% block content %}

  <div class='container'>
    <div class='row'>
      <div class='col-lg-12'>
        {% include 'parts/list_header.html' %}
        <ul class="nav nav-tabs">
          <li role="presentation"><a href="{% url 'subscriber-management-list-subscribers' list_item.uuid %}">{% trans 'Subscribers' %}</a></li>
          <li role="presentation"><a href="{% url 'subscriber-management-list-newsletter-homepage' list_item.uuid %}">{% trans 'Newsletter homepage' %}</a></li>
          <li role="presentation"><a href="{% url 'subscriber-management-list-sign-up-form' list_item.uuid %}">{% trans 'Signup form' %}</a></li>
          <li role="presentation" class="active"><a href="{% url 'subscriber-management-list-settings' list_item.uuid %}">{% trans 'Settings' %}</a></li>
        </ul>
      </div>
    </div>
    <div class='row'>
      <div class='col-lg-6'>
        <br>
        <form method="POST" class="">
            {% csrf_token %}
          <div class="form-group">
              <div class="form-group {% if form_object.email.errors %}has-error{% endif %}">
                <label for="{{form_object.name.auto_id}}" class="control-label">{% trans 'Rename this list' %}</label>
                <input id="{{form_object.name.auto_id}}" name="{{form_object.name.name}}" class='form-control input-lg' autofocus tabindex='0' value ="{{form_object.name.value | default_if_none:""}}" required/>
                {% for error in form_object.name.errors %}
                  <span class="error-block">{{error}}</span>
                {% endfor %}
              </div>
              <div class="form-group">
                <label for="" class="control-label">{% trans 'From email' %}</label>
                <p>{{list_item.from_email}}</p>
              </div>
            <div class='help-block'>This name is only visible to you. Go to your <a href='{% url 'subscriber-management-list-newsletter-homepage' list_item.uuid  %}'>newsletter homepage</a> for more.</div>
          </div>
          <button type="submit" class="btn btn-default">{% trans 'Update' %}</button>
        </form>
        {% for error in form_object.name.errors %}
          <span class="error-block text-danger">{{error}}</span>
        {% endfor %}
        <hr>
        <a href="#" class="btn btn-danger" data-toggle="modal" data-target="#subscriber_list_delete_confirmation">
          {% if list_item.count_validated_subscribers %}
            {% trans 'Delete this list' %}
            ({{list_item.count_validated_subscribers|intcomma}} {% trans 'subscribers' %})
          {% else %}
            {% trans 'Delete this list' %}
          {% endif %}
        </a>
      </div>
    </div>
  </div>


  <div id='subscriber_list_delete_confirmation' class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form method='POST' action="{% url 'subscriber-management-list-delete' list_item.uuid %}">
          {% csrf_token %}
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Please confirm deletion of {{list_item.name}}</h4>
          </div>
          <div class="modal-body">
            <p>
              <strong>Are you sure you want to delete {{list_item.name}}?</strong>
            </p>
            <ul>
              <li>{{list_item.count_validated_subscribers|intcomma}} {% trans 'subscribers will be deleted forever' %}.</li>
            </ul>
            <ul>
              <li>This newsletter list won't be able to accept new subscribers.</li>
            </ul>
            <ul>
              <li>All sign-up form integrations (if any) will stop working.</li>
            </ul>
          </div>
          <div class="modal-footer">
            <a href='javascript:void(0)' type="button" class="btn btn-default" data-dismiss="modal">No, keep it</a>
            <button type="submit" class="btn btn-danger">Yes, delete it</button>
          </div>
        </form>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div>
  {% include 'import.html' %}
{% endblock %}
